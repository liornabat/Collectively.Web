<template>
    <require from="../../converters/dateFormatValueConverter"></require>
    <h4>Remark [${state}]</h4>
    <div class="section">
        <div class="col s12">
            <a href.bind="bigPhoto.url" target="_blank">
                <img class="responsive-img" src.bind="mediumPhoto.url"/>
            </a>
        </div>
    </div>
    <div class="divider"></div>
    <div class="section">
        <div class="row">
            <div class="col s12">
                <label>Category</label>
                <p textcontent.one-way="remark.category.name"/>
            </div>
            <div class="col s12">
                <label>Location</label>
                <p click.delegate="display()">${remark.location.address}</p>
            </div>
            <div class="col s12">
                <label>Description</label>              
                <p textcontent.one-way="remark.description"/>
            </div>
            <div class="col s12">
                <label>Author</label>
                <p><a route-href="route: user-remarks; params.bind: {name : remark.author.name}">${remark.author.name}</a></p>
            </div>
        </div>
    </div>
    <div if.bind="remark.resolved">
        <h4>Resolved</h4>
        <div class="divider"></div>
        <div class="section">
            <div class="row">
                <div if.bind="resolvedBigPhoto" class="col s12">
                    <a href.bind="resolvedBigPhoto.url" target="_blank">
                        <img class="responsive-img" src.bind="resolvedMediumPhoto.url"/>
                    </a>
                </div>
                <div class="col s12">
                    <label>Resolver</label>
                    <p><a route-href="route: user-remarks; params.bind: {name : remark.resolver.name}">${remark.resolver.name}</a></p>
                </div>
                <div class="col s12">
                    <label>Resolved at</label>
                    <p>${remark.resolvedAt | dateFormat}</p>
                </div>                
            </div>
        </div>
    </div>
    <div class="section">
        <div class="row">
            <div class="col s12">
                <button click.delegate="display()" class="btn waves-effect waves-light btn-large">
                    Display on map
                </button>
            </div>
        </div>
    </div>
    <div if.bind="canResolve">
        <div class="section">
            <div class="row">
                <div class="col s12">
                    <button md-modal-trigger href="#modal-resolve" disabled.bind="isSending" class="btn waves-effect waves-light btn-large">
                        Resolve
                    </button>
                </div>
            </div>
        </div>
        <div id="modal-resolve" class="modal">
            <div class="modal-content">
                <p>Do you really want to resolve this remark?</p>
            </div>
            <div class="modal-footer">
                <a click.delegate="resolve()" md-button="flat: true;" md-waves="color: accent;" class="modal-action modal-close">Yes</a>
                <a md-button="flat: true;" md-waves="color: accent;" class="modal-action modal-close">No</a>
            </div>
        </div>
    </div>
    <div if.bind="canDelete">
        <div class="divider"></div>
        <div class="section">
            <div class="row">
                <div class="col s12">
                    <button md-modal-trigger disabled.bind="isDeleting" href="#modal1" class="btn waves-effect waves-light btn-large">
                        Delete
                    </button>
                </div>
            </div>
        </div>
        <div id="modal1" class="modal">
            <div class="modal-content">
                <p>Do you really want to delete the remark?</p>
            </div>
            <div class="modal-footer">
                <a click.delegate="delete()" md-button="flat: true;" md-waves="color: accent;" class="modal-action modal-close">Yes</a>
                <a md-button="flat: true;" md-waves="color: accent;" class="modal-action modal-close">No</a>
            </div>
        </div>
    </div>
</template>
